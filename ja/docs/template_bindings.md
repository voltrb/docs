# テンプレートバインディング

すべての ```views/*.html``` ファイルはテンプレートとして扱われ、テンプレートバインディングを利用することで、それらを他のビューの内部でレンダリングすることが可能です。

```html
{{ template "header" }}
```

```template``` に渡す文字列は *テンプレートのパス* でなければなりません。テンプレートと後述するタグは、同様の方法でビューとコントローラーを探索します。

誰もが、アプリケーションの各パートごとのスコープと必要な機能を事前に定めておきたいと考えていることでしょう。しかし現実には、予想していた以上に規模が大きくなってしまったりして、思った通りに上手くいかないこともありがちです。テンプレートとタグを利用すると、再利用可能なコードやビューを簡単にセットアップすることが可能です。テンプレートやタグが大きくなってきたら、その呼び出し側には変更を加えることなく、コントロールの場所を移すことができます。

サンプルのテンプレートを例として、どのように探索されるのか見てみましょう。

```html
{{ template "header" }}
```
Given the string "header", Volt will search for the view file in the following locations (in order):

| Section   | View File    | View Folder    | Component   |
|-----------|--------------|----------------|-------------|
| header    |              |                |             |
| :body     | header.html  |                |             |
| :body     | index.html   | header         |             |
| :body     | index.html   | index          | header      |
| :body     | index.html   | index          | gems/header |

ビューが見つかると、それに関連するコントローラーがまず読み込まれます。


上記の各パートについて説明します:

1. セクション
ビューはセクションから構成されます。セクションは ```<:セクション名>``` で始まり、閉じタグはありません。Volt はまず同じビュー内のセクションを探します。

2. ビュー
次に、Volt はテンプレートのパスにあるビューのファイルを探します。もしそこで見つかれば、ビューの body セクションにレンダリングします。

3. ビューのフォルダー
上記で見つからなければ、Volt はビューのフォルダーの中で、コントローラーの名前のファイル、もしくは index.html を探します。そして、:body セクションにレンダリングされます。もしコントローラーがビューのフォルダーに存在した場合には、そのコントローラーのインスタンスが新しく生成され、そのインスタンスでレンダリングが行われます。

4. コンポーネント
次に、app/ 以下のすべてのフォルダーをチェックします。対象となるビューのパスは {component}/index/index.html で、:body セクションを持っているものになります。

5. gem
最後に、「volt」で始まるすべての gem の app フォルダをチェックします。コンポーネントに対しても上記と同様にチェックされます。


また、テンプレートバインディングを作成するときに、その名前に複数の探索パスを指定することもできます。各パートは ```/``` で区切る必要があります。例えば:

```html
    {{ template "blog/comments" }}
```

上記の例の場合は以下のように探索します:

| セクション   | ビューのファイル | ビューのフォルダー | コンポーネント |
|--------------|------------------|--------------------|----------------|
| :comments    | blog.html        |                    |                |
| :body        | comments.html    | blog               |                |
| :body        | index.html       | comments           | blog           |
| :body        | index.html       | comments           | gems/blog      |

コントロールやテンプレートのためのビューのファイルが見つかれば、それにマッチするコントローラーを探します。もしテンプレートのファイルがコントローラーに関連付けられていなければ、```ModelController``` が使われます。コントローラーが見つかって読み込まれると、それに対応する「アクション (action)」メソッドが (存在すれば) コントローラー上で実行されます。デフォルトのアクションメソッドは「index」となります。ただし、コンポーネントかテンプレートのパスが2つのパートを持っている場合には、その最後のパートがアクションとなります。

